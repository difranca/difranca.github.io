"use strict";(self.webpackChunkdifranca=self.webpackChunkdifranca||[]).push([[337],{5613:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var r=t(5893),i=t(1151);const s={keywords:["argo","cd","argocd","gitops"],title:"Architecture | Argo CD | DevSecOps | Tech-Notes",sidebar_label:"Architecture"},o="Architecture",c={id:"devsecops/argocd/architecture",title:"Architecture | Argo CD | DevSecOps | Tech-Notes",description:"Argo CD components, CRDs and architectural patterns.",source:"@site/docs/tech/devsecops/argocd/architecture.md",sourceDirName:"devsecops/argocd",slug:"/devsecops/argocd/architecture",permalink:"/tech-notes/devsecops/argocd/architecture",draft:!1,unlisted:!1,editUrl:"https://github.com/difranca/difranca.github.io/blob/main/docs/tech/devsecops/argocd/architecture.md",tags:[],version:"current",frontMatter:{keywords:["argo","cd","argocd","gitops"],title:"Architecture | Argo CD | DevSecOps | Tech-Notes",sidebar_label:"Architecture"},sidebar:"tech",previous:{title:"Argo CD",permalink:"/tech-notes/devsecops/argocd"},next:{title:"Git",permalink:"/tech-notes/devsecops/git"}},a={},l=[{value:"Components",id:"components",level:2},{value:"argocd-server",id:"argocd-server",level:3},{value:"argocd-application-controller",id:"argocd-application-controller",level:3},{value:"argocd-repo-server",id:"argocd-repo-server",level:3},{value:"argocd-dex",id:"argocd-dex",level:3},{value:"argocd-redis",id:"argocd-redis",level:3},{value:"Custom Resources",id:"custom-resources",level:2},{value:"Application",id:"application",level:3},{value:"Project",id:"project",level:3},{value:"App of Apps (Cluster Bootstrapping)",id:"app-of-apps-cluster-bootstrapping",level:2}];function d(e){const n={a:"a",admonition:"admonition",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Argo CD components, CRDs and architectural patterns."}),"\n",(0,r.jsx)(n.h2,{id:"components",children:"Components"}),"\n",(0,r.jsx)(n.h3,{id:"argocd-server",children:"argocd-server"}),"\n",(0,r.jsx)(n.p,{children:"It runs the Argo CD API server which exposes the API consumed by the Web UI, CLI, and CI/CD systems."}),"\n",(0,r.jsx)(n.p,{children:"Responsibilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Application management and status reporting"}),"\n",(0,r.jsx)(n.li,{children:"Invoking of application operations (e.g. sync, rollback, user-defined actions)"}),"\n",(0,r.jsx)(n.li,{children:"Repository and cluster credential management (stored as Kubernetes secrets)"}),"\n",(0,r.jsx)(n.li,{children:"Authentication and auth delegation to external identity providers"}),"\n",(0,r.jsx)(n.li,{children:"RBAC enforcement"}),"\n",(0,r.jsx)(n.li,{children:"Listener/forwarder for Git webhook events"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"argocd-application-controller",children:"argocd-application-controller"}),"\n",(0,r.jsx)(n.p,{children:"It runs Argo CD Application Controller, which is a Kubernetes controller, that continuously monitors running applications and compares the current state against the desired target state."}),"\n",(0,r.jsx)(n.p,{children:"Responsabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"OutOfSync"})," application state detection"]}),"\n",(0,r.jsxs)(n.li,{children:["Optionally takes corrective actions against ",(0,r.jsx)(n.em,{children:"OutOfSync"})," states"]}),"\n",(0,r.jsx)(n.li,{children:"Invoking any user-defined hooks for lifecycle events (e.g. PreSync, Sync, PostSync)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"argocd-repo-server",children:"argocd-repo-server"}),"\n",(0,r.jsx)(n.p,{children:"It runs Argo CD Repository Server, which maintains a local cache of the Git repository holding the application manifests."}),"\n",(0,r.jsx)(n.p,{children:"Responsabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Generating and returning the Kubernetes manifests based on:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Repository URL"}),"\n",(0,r.jsx)(n.li,{children:"Revision (commit, tag, branch)"}),"\n",(0,r.jsx)(n.li,{children:"Application path"}),"\n",(0,r.jsx)(n.li,{children:"Template specific settings (e.g. parameters, Helm values.yaml)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"argocd-dex",children:"argocd-dex"}),"\n",(0,r.jsx)(n.p,{children:"It runs Argo CD Dex, which is an identity service that uses OpenID Connect to drive authentication for Argo CD."}),"\n",(0,r.jsx)(n.p,{children:"Responsabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deferring authentication to:"}),"\n",(0,r.jsx)(n.li,{children:"LDAP servers"}),"\n",(0,r.jsx)(n.li,{children:"SAML providers"}),"\n",(0,r.jsx)(n.li,{children:"Other identity providers, such as GitHub, Google, and Active Directory"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"argocd-redis",children:"argocd-redis"}),"\n",(0,r.jsx)(n.p,{children:"It runs Redis, which is an open source in-memory data structure store, used as a database."}),"\n",(0,r.jsx)(n.p,{children:"Responsabilities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cache"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"More Information",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/en/stable/operator-manual/architecture/",children:"https://argo-cd.readthedocs.io/en/stable/operator-manual/architecture/"})}),"\n"]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(n.h2,{id:"custom-resources",children:"Custom Resources"}),"\n",(0,r.jsx)(n.h3,{id:"application",children:"Application"}),"\n",(0,r.jsx)(n.p,{children:"Application is a custom Resource Definition (CRD) which represents a deployed application instance in an environment.\nIt is defined by two key pieces of information:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": reference to the desired state in Git (repository, revision, path, environment)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Destination"}),": reference to the target cluster and namespace"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"More Information",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications",children:"https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#applications"})}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"project",children:"Project"}),"\n",(0,r.jsx)(n.p,{children:"Projects provide a logical grouping of applications.\nIt can apply restrictions to applications, such as:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"What may be deployed (trusted Git sources)"}),"\n",(0,r.jsx)(n.li,{children:"Where apps may be deployed to (destination clusters and namespaces)"}),"\n",(0,r.jsx)(n.li,{children:"What kinds of objects may be deployed (e.g. RBAC, CRDs, DaemonSets, NetworkPolicy)"}),"\n",(0,r.jsx)(n.li,{children:"Defining project roles to provide application RBAC (bound to OIDC groups and/or JWT tokens)"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"More Information",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/en/stable/user-guide/projects/",children:"https://argo-cd.readthedocs.io/en/stable/user-guide/projects/"})}),"\n"]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(n.h2,{id:"app-of-apps-cluster-bootstrapping",children:"App of Apps (Cluster Bootstrapping)"}),"\n",(0,r.jsx)(n.p,{children:"It is a pattern that creates an Argo CD application that creates other apps. This allows you to declaratively manage a group of apps that can be deployed and configured."}),"\n",(0,r.jsx)(n.admonition,{title:"More Information",type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/",children:"https://argo-cd.readthedocs.io/en/stable/operator-manual/cluster-bootstrapping/"})}),"\n"]})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>o});var r=t(7294);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);